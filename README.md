# è¯­æ–™è‡ªåŠ¨ç”Ÿæˆå·¥å…·

ä¸€ä¸ªåŸºäº DeepSeek API çš„è‡ªåŠ¨åŒ–è¯­æ–™ç”Ÿæˆå·¥å…·ï¼Œæ”¯æŒå¤§è§„æ¨¡ã€é«˜è´¨é‡çš„å¯¹è¯è¯­æ–™ç”Ÿæˆã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ **è‡ªåŠ¨åŒ–ç”Ÿæˆ**ï¼šè‡ªåŠ¨è§£æé…ç½®ï¼Œç”Ÿæˆæ‰€æœ‰ç»„åˆä»»åŠ¡ï¼ˆ20ä¸ªé¢†åŸŸ Ã— 8ç§ç±»å‹ Ã— 5ç§è½®æ¬¡ = 800ä¸ªä»»åŠ¡ï¼‰
- ğŸ“Š **æ™ºèƒ½ç®¡ç†**ï¼šè‡ªåŠ¨ç®¡ç†ä¼šè¯ã€token ä¼°ç®—ã€æ•°æ®è¡¥é½
- ğŸ’¾ **æ–­ç‚¹ç»­ä¼ **ï¼šæ”¯æŒä¸­æ–­åç»§ç»­ç”Ÿæˆï¼Œè‡ªåŠ¨è·³è¿‡å·²å®Œæˆçš„ä»»åŠ¡
- ğŸ”§ **æ¨¡å—åŒ–è®¾è®¡**ï¼šä»£ç ç»“æ„æ¸…æ™°ï¼Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤
- âš™ï¸ **çµæ´»é…ç½®**ï¼šæ”¯æŒå¤šç§é…ç½®æ–¹å¼ï¼Œé€‚åº”ä¸åŒéœ€æ±‚

## é¡¹ç›®ç»“æ„

```
cautious_secretary_dataset/
â”œâ”€â”€ generate_corpus.py          # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ config.py                   # ä¸»ç¨‹åºé…ç½®ï¼ˆè·¯å¾„ã€ä»»åŠ¡å‚æ•°ã€Tokenä¼°ç®—ï¼‰
â”œâ”€â”€ requirements.txt            # Pythonä¾èµ–
â”œâ”€â”€ initial_prompt.txt          # åˆå§‹æç¤ºè¯æ–‡ä»¶
â”œâ”€â”€ LICENSE                     # è®¸å¯è¯æ–‡ä»¶
â”œâ”€â”€ client/                     # å®¢æˆ·ç«¯æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ deepseek_client.py     # DeepSeek APIå®¢æˆ·ç«¯å®ç°
â”œâ”€â”€ command_generation/         # å‘½ä»¤ç”Ÿæˆæ¨¡å—
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ parser.py              # è§£æç”Ÿæˆè®¡åˆ’ã€æ„å»ºæŒ‡ä»¤
â”‚   â””â”€â”€ generation_plan.txt     # ç”Ÿæˆè®¡åˆ’é…ç½®æ–‡ä»¶
â”œâ”€â”€ data/                       # åŸå§‹æ•°æ®ç›®å½•ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
â”‚   â””â”€â”€ cautious_secretary_raw/
â”‚       â””â”€â”€ {é¢†åŸŸ}/{ç±»å‹}/{è½®æ¬¡}_round.json
â”œâ”€â”€ data_processing/            # æ•°æ®å¤„ç†è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ check_conversations.py  # æ•°æ®è´¨é‡æ£€æµ‹è„šæœ¬
â”‚   â”œâ”€â”€ consolidate_data.py     # æ•°æ®æ•´ç†è„šæœ¬
â”‚   â”œâ”€â”€ print_stats.py          # ç»Ÿè®¡æŠ¥å‘Šæ‰“å°è„šæœ¬
â”‚   â””â”€â”€ conversation_check_stats.json  # æ£€æµ‹è„šæœ¬ç»Ÿè®¡æŠ¥å‘Šï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ utils/                      # å·¥å…·å‡½æ•°æ¨¡å—
â”‚   â”œâ”€â”€ __init__.py             # æ¨¡å—åˆå§‹åŒ–æ–‡ä»¶
â”‚   â”œâ”€â”€ utils.py                # å·¥å…·å‡½æ•°ï¼ˆJSONæå–ã€æ•°æ®ç»Ÿè®¡ã€ä¿å­˜ï¼‰
â”‚   â””â”€â”€ QRcode.jpg              # æ‰“èµäºŒç»´ç 
â””â”€â”€ output_dataset/             # æ•´ç†åçš„æ•°æ®é›†è¾“å‡ºç›®å½•ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
    â””â”€â”€ consolidated_data.json  # æ•´ç†åçš„å®Œæ•´æ•°æ®é›†
```

## å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

#### å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

æˆ–æ‰‹åŠ¨å®‰è£…ï¼š

```bash
pip install requests
```

#### è·å– DeepSeek API Key

1. è®¿é—® [DeepSeek å®˜ç½‘](https://www.deepseek.com/)
2. æ³¨å†Œ/ç™»å½•è´¦å·
3. åœ¨æ§åˆ¶å°è·å– API Key

#### è®¾ç½®ç¯å¢ƒå˜é‡

**Linux/Mac:**
```bash
export DEEPSEEK_API_KEY='your-api-key-here'
```

**Windows (PowerShell):**
```powershell
$env:DEEPSEEK_API_KEY='your-api-key-here'
```

**Windows (CMD):**
```cmd
set DEEPSEEK_API_KEY=your-api-key-here
```

æˆ–è€…åˆ›å»º `.env` æ–‡ä»¶ï¼ˆéœ€è¦å®‰è£… `python-dotenv`ï¼‰ï¼š
```
DEEPSEEK_API_KEY=your-api-key-here
```

### 2. è¿è¡Œè„šæœ¬

```bash
python generate_corpus.py
```

## è¯¦ç»†ä½¿ç”¨è¯´æ˜

### å·¥ä½œæµç¨‹

1. **åˆå§‹åŒ–**ï¼š
   - è¯»å– `initial_prompt.txt` ä½œä¸ºç³»ç»Ÿæç¤ºè¯
   - è§£æ `command_generation/generation_plan.txt` è·å–ä»»åŠ¡é…ç½®
   - åˆå§‹åŒ– DeepSeek å®¢æˆ·ç«¯

2. **ä»»åŠ¡ç”Ÿæˆ**ï¼šå¯¹æ¯ä¸ªç»„åˆï¼ˆé¢†åŸŸÃ—ç±»å‹Ã—è½®æ¬¡ï¼‰ï¼š
   - æ£€æŸ¥å·²æœ‰æ•°æ®é‡ï¼Œè·³è¿‡å·²å®Œæˆçš„ä»»åŠ¡
   - æ„å»ºç”ŸæˆæŒ‡ä»¤
   - å‘é€ç»™ DeepSeek API
   - æå–è¿”å›çš„ JSON æ•°æ®
   - ä¿å­˜åˆ° `data/cautious_secretary_raw/{é¢†åŸŸ}/{ç±»å‹}/{è½®æ¬¡}_round.json`

3. **è‡ªåŠ¨è¡¥é½**ï¼šå¦‚æœç”Ÿæˆçš„æ•°æ®ä¸è¶³ç›®æ ‡æ•°é‡ï¼Œè„šæœ¬ä¼šï¼š
   - è‡ªåŠ¨å‘é€è¡¥é½è¯·æ±‚
   - åœ¨åŒä¸€ä¼šè¯ä¸­ç»§ç»­å¯¹è¯
   - ç›´åˆ°è¾¾åˆ°ç›®æ ‡æ•°é‡ï¼ˆé»˜è®¤50æ¡ï¼‰

4. **ä¼šè¯ç®¡ç†**ï¼š
   - æ¯ä¸ªä»»åŠ¡å¼€å§‹æ—¶é‡ç½®ä¼šè¯ï¼ˆåªä¿ç•™ system promptï¼‰
   - å½“ä¼šè¯é•¿åº¦æ¥è¿‘é™åˆ¶æ—¶ï¼Œè‡ªåŠ¨å¼€å¯æ–°ä¼šè¯
   - åˆ©ç”¨ Context Caching æœºåˆ¶èŠ‚çœ token è´¹ç”¨

### è¾“å‡ºæ–‡ä»¶ç»“æ„

```
data/cautious_secretary_raw/
â”œâ”€â”€ Beauty_Hairdressing/
â”‚   â”œâ”€â”€ constraint_missing/
â”‚   â”‚   â”œâ”€â”€ 1_round.json
â”‚   â”‚   â”œâ”€â”€ 2_round.json
â”‚   â”‚   â”œâ”€â”€ 3_round.json
â”‚   â”‚   â”œâ”€â”€ 4_round.json
â”‚   â”‚   â””â”€â”€ 5_round.json
â”‚   â”œâ”€â”€ condition_missing/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ ...
â”œâ”€â”€ Education_Learning/
â”‚   â””â”€â”€ ...
â””â”€â”€ incomplete_tasks.txt        # æœªå®Œæˆä»»åŠ¡è®°å½•
```

### æ•°æ®æ ¼å¼è¯´æ˜

æ¯ä¸ª JSON æ–‡ä»¶åŒ…å«ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä»£è¡¨ä¸€æ¡å¯¹è¯æ•°æ®ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

```json
{
  "system": "ã€åŠ©ç†è§’è‰²ã€‘æ‚¨æ˜¯ä¸€ä½ä¸“ä¸šçš„ç¾å®¹ç¾å‘é¡¾é—®...",
  "conversations": [
    {
      "from": "human",
      "value": "æˆ‘æƒ³ä¹°ä¸€æ¬¾ç²¾åï¼Œæœ€è¿‘æ„Ÿè§‰çš®è‚¤å¾ˆå¹²ï¼Œè€Œä¸”æœ‰ç‚¹æš—æ²‰ã€‚"
    },
    {
      "from": "gpt",
      "value": "æ˜ç™½äº†ï¼Œæ‚¨éœ€è¦ä¸€æ¬¾é’ˆå¯¹å¹²ç‡¥å’Œæš—æ²‰çš®è‚¤çš„ç²¾å..."
    },
    {
      "from": "human",
      "value": "æˆ‘å¸Œæœ›å®ƒæ—¢èƒ½è¡¥æ°´ä¿æ¹¿ï¼Œåˆèƒ½æäº®è‚¤è‰²..."
    },
    {
      "from": "gpt",
      "value": "ã€å®Œæ•´è¯·æ±‚æ€»ç»“ã€‘ç”¨æˆ·å’¨è¯¢æŠ¤è‚¤äº§å“ï¼ˆç²¾åï¼‰..."
    }
  ]
}
```

**æ•°æ®å­—æ®µè¯´æ˜ï¼š**

- **`system`** (å¿…éœ€): ç³»ç»Ÿæç¤ºè¯ï¼Œå®šä¹‰åŠ©ç†çš„è§’è‰²å’Œä»»åŠ¡è¦æ±‚
- **`conversations`** (å¿…éœ€): å¯¹è¯åˆ—è¡¨ï¼ŒåŒ…å«å¤šè½®å¯¹è¯
  - **`from`**: å¯¹è¯æ¥æºï¼Œå–å€¼ä¸º `"human"` æˆ– `"gpt"`
  - **`value`**: å¯¹è¯å†…å®¹
  - å¯¹è¯å¿…é¡»äº¤æ›¿å‡ºç°ï¼ˆhuman â†’ gpt â†’ human â†’ gpt ...ï¼‰
  - æœ€åä¸€ä¸ªå¯¹è¯å¿…é¡»æ¥è‡ª `"gpt"`ï¼Œä¸” `value` å¿…é¡»ä»¥ `"ã€å®Œæ•´è¯·æ±‚æ€»ç»“ã€‘"` å¼€å¤´

**æ•°æ®ç»„ç»‡æ–¹å¼ï¼š**

- **é¢†åŸŸ** (Domain): 20ä¸ªä¸åŒé¢†åŸŸï¼Œå¦‚ `Beauty_Hairdressing`ã€`Education_Learning` ç­‰
- **æ¨¡ç³Šç±»å‹** (Ambiguity Type): 8ç§ä¸åŒçš„æ¨¡ç³Šç±»å‹ï¼Œå¦‚ `constraint_missing`ã€`condition_missing` ç­‰
- **è½®æ¬¡** (Round): 1-5è½®å¯¹è¯ï¼Œæ–‡ä»¶åæ ¼å¼ä¸º `{è½®æ¬¡}_round.json`
- æ¯ä¸ªæ–‡ä»¶é»˜è®¤åŒ…å« 50 æ¡æ•°æ®

**æ•°æ®è´¨é‡è¦æ±‚ï¼š**

- æ¯æ¡æ•°æ®å¿…é¡»åŒ…å« `system` å­—æ®µ
- `conversations` ä¸­ `human` å’Œ `gpt` çš„æ•°é‡å¿…é¡»ç›¸ç­‰
- `human` çš„æ•°é‡å¿…é¡»ä¸æ–‡ä»¶åä¸­çš„è½®æ¬¡æ•°åŒ¹é…
- æœ€åä¸€ä¸ª `gpt` å¯¹è¯çš„ `value` å¿…é¡»ä»¥ `"ã€å®Œæ•´è¯·æ±‚æ€»ç»“ã€‘"` å¼€å¤´

### æ–­ç‚¹ç»­ä¼ 

è„šæœ¬ä¼šè‡ªåŠ¨æ£€æŸ¥å·²ç”Ÿæˆçš„æ•°æ®é‡ï¼š
- å¦‚æœæŸä¸ªä»»åŠ¡å·²ç»å®Œæˆï¼ˆå·²æœ‰ç›®æ ‡æ•°é‡çš„æ•°æ®ï¼‰ï¼Œä¼šè‡ªåŠ¨è·³è¿‡
- å¦‚æœä»»åŠ¡æœªå®Œæˆï¼Œä¼šç»§ç»­ç”Ÿæˆå‰©ä½™çš„æ•°æ®
- æ”¯æŒéšæ—¶ä¸­æ–­å’Œæ¢å¤

## é…ç½®è¯´æ˜

### å®¢æˆ·ç«¯é…ç½® (`client/deepseek_client.py`)

å®¢æˆ·ç«¯ç›¸å…³çš„é…ç½®ç›´æ¥å®šä¹‰åœ¨ `client/deepseek_client.py` æ–‡ä»¶é¡¶éƒ¨ï¼š

#### API é…ç½®

```python
DEEPSEEK_API_BASE = "https://api.deepseek.com/chat/completions"
DEEPSEEK_API_KEY = os.getenv("DEEPSEEK_API_KEY", "")
```

#### Token é™åˆ¶é…ç½®

```python
MAX_TOKENS_OUTPUT_REASONER_MAX = 64000  # reasoneræ¨¡å‹æœ€å¤§è¾“å‡ºtokenæ•°
MAX_TOKENS_OUTPUT_STANDARD = 8000       # æ ‡å‡†æ¨¡å‹çš„æœ€å¤§è¾“å‡ºtokenæ•°
MAX_CONTEXT_LENGTH = 110000             # ä¼šè¯æ€»é•¿åº¦é™åˆ¶
REASONING_TOKENS_BUFFER = 5000          # reasoneræ¨¡å‹æ¨ç†tokenç¼“å†²
```

#### æ¨¡å‹é…ç½®

```python
MODEL_NAME = os.getenv("DEEPSEEK_MODEL", "deepseek-reasoner")
TEMPERATURE = 0.7  # æ§åˆ¶ç”Ÿæˆéšæœºæ€§
```

**æ¨¡å‹é€‰æ‹©**ï¼š
- `deepseek-chat`: æ ‡å‡†æ¨¡å‹ï¼Œé€Ÿåº¦å¿«ï¼Œé€‚åˆç®€å•ä»»åŠ¡
- `deepseek-reasoner`: æ¨ç†æ¨¡å‹ï¼Œè´¨é‡é«˜ä½†é€Ÿåº¦ç¨æ…¢ï¼Œé€‚åˆå¤æ‚ä»»åŠ¡ï¼ˆé»˜è®¤ï¼‰

### ä¸»ç¨‹åºé…ç½® (`config.py`)

#### è·¯å¾„é…ç½®

```python
PROJECT_ROOT = Path(__file__).parent
INITIAL_PROMPT_FILE = PROJECT_ROOT / "initial_prompt.txt"
OUTPUT_BASE_DIR = PROJECT_ROOT / "data" / "cautious_secretary_raw"
```

#### Token ä¼°ç®—é…ç½®

```python
TOKENS_PER_ITEM_BY_ROUND = {
    1: 365,   # 1è½®ï¼šæ¯æ¡çº¦365 tokens
    2: 344,   # 2è½®ï¼šæ¯æ¡çº¦344 tokens
    3: 354,   # 3è½®ï¼šæ¯æ¡çº¦354 tokens
    4: 481,   # 4è½®ï¼šæ¯æ¡çº¦481 tokens
    5: 425,   # 5è½®ï¼šæ¯æ¡çº¦425 tokens
}
```

#### ä»»åŠ¡é…ç½®

```python
TARGET_ITEMS_PER_TASK = 50    # æ¯ä¸ªä»»åŠ¡çš„ç›®æ ‡æ•°æ®æ¡æ•°
MAX_RETRIES = 3                # æœ€å¤šé‡è¯•æ¬¡æ•°
RETRY_DELAY = 2                # é‡è¯•å»¶è¿Ÿï¼ˆç§’ï¼‰
SUCCESS_DELAY = 3              # æˆåŠŸå¤„ç†åçš„å»¶è¿Ÿï¼ˆç§’ï¼‰
```

### ç¯å¢ƒå˜é‡é…ç½®

```bash
# å¿…éœ€ï¼šAPI Key
export DEEPSEEK_API_KEY='your-api-key'

# å¯é€‰ï¼šæ¨¡å‹é€‰æ‹©ï¼ˆé»˜è®¤ deepseek-reasonerï¼‰
export DEEPSEEK_MODEL='deepseek-reasoner'  # æˆ– 'deepseek-chat'
```

## ä»£ç ç»“æ„è¯´æ˜

### æ¨¡å—è¯´æ˜

#### `client/` - å®¢æˆ·ç«¯æ¨¡å—

åŒ…å«ä¸åŒ API å®¢æˆ·ç«¯çš„å®ç°ï¼Œå½“å‰æ”¯æŒ DeepSeekã€‚

- **`deepseek_client.py`**: DeepSeek API å®¢æˆ·ç«¯
  - `DeepSeekClient`: ä¸»è¦å®¢æˆ·ç«¯ç±»
  - åŠŸèƒ½ï¼šAPI è¯·æ±‚ã€ä¼šè¯ç®¡ç†ã€token ä¼°ç®—ã€é”™è¯¯å¤„ç†

#### `command_generation/` - å‘½ä»¤ç”Ÿæˆæ¨¡å—

å¤„ç†ç”Ÿæˆè®¡åˆ’çš„è§£æå’ŒæŒ‡ä»¤æ„å»ºã€‚

- **`parser.py`**: è§£æå’Œæ„å»ºå‡½æ•°
  - `parse_generation_plan()`: è§£æç”Ÿæˆè®¡åˆ’æ–‡ä»¶
  - `extract_domain_code()`: æå–é¢†åŸŸä»£ç 
  - `extract_type_code()`: æå–ç±»å‹ä»£ç 
  - `extract_round_num()`: æå–è½®æ¬¡æ•°
  - `build_generation_instruction()`: æ„å»ºç”ŸæˆæŒ‡ä»¤

- **`generation_plan.txt`**: ç”Ÿæˆè®¡åˆ’é…ç½®æ–‡ä»¶
  - å®šä¹‰é¢†åŸŸåˆ—è¡¨ï¼ˆ20ä¸ªï¼‰
  - å®šä¹‰æ¨¡ç³Šç±»å‹åˆ—è¡¨ï¼ˆ8ç§ï¼‰
  - å®šä¹‰å¯¹è¯è½®æ¬¡åˆ—è¡¨ï¼ˆ5ç§ï¼‰

#### `utils/` - å·¥å…·å‡½æ•°æ¨¡å—

æä¾› JSON å¤„ç†ã€æ•°æ®ç»Ÿè®¡ç­‰åŠŸèƒ½ã€‚

- **`utils.py`**: å·¥å…·å‡½æ•°å®ç°
  - `extract_json_from_text()`: ä»æ–‡æœ¬ä¸­æå– JSON æ•°ç»„
  - `_extract_partial_json_array()`: å¤„ç†æˆªæ–­çš„ JSON æ•°ç»„
  - `count_data_items()`: ç»Ÿè®¡ JSON æ–‡ä»¶ä¸­çš„æ•°æ®æ¡æ•°
  - `save_json_data()`: ä¿å­˜ JSON æ•°æ®åˆ°æ–‡ä»¶
- **`QRcode.jpg`**: æ‰“èµäºŒç»´ç å›¾ç‰‡

#### `generate_corpus.py` - ä¸»ç¨‹åº

åè°ƒå„ä¸ªæ¨¡å—ï¼Œæ‰§è¡Œç”Ÿæˆä»»åŠ¡ã€‚

- `generate_single_task()`: ç”Ÿæˆå•ä¸ªä»»åŠ¡çš„æ•°æ®
- `main()`: ä¸»å‡½æ•°ï¼Œåè°ƒæ•´ä¸ªç”Ÿæˆæµç¨‹

## ä¼˜åŒ–ç­–ç•¥

### 1. Context Caching æœºåˆ¶

- ä½¿ç”¨ `system` message å­˜å‚¨å›ºå®šçš„ initial prompt
- DeepSeek API ä¼šè‡ªåŠ¨ç¼“å­˜é‡å¤çš„ system prompt
- å¤§å¹…èŠ‚çœ token è´¹ç”¨ï¼ˆç¼“å­˜å‘½ä¸­ç‡é€šå¸¸ > 95%ï¼‰
- è„šæœ¬ä¼šæ˜¾ç¤ºç¼“å­˜å‘½ä¸­ç‡ï¼Œä¾¿äºç›‘æ§

### 2. æ™ºèƒ½ Token ç®¡ç†

- **åŠ¨æ€ä¼°ç®—**ï¼šæ ¹æ®è½®æ¬¡å’Œæ•°æ®é‡åŠ¨æ€ä¼°ç®—è¾“å‡º token
- **åæ¯”ä¾‹ Buffer**ï¼šæ•°æ®é‡è¶Šå°‘ï¼Œbuffer æ¯”ä¾‹è¶Šé«˜ï¼ˆæœ€é«˜ 50%ï¼‰
- **æ¨ç† Token ç¼“å†²**ï¼šä¸º reasoner æ¨¡å‹é¢„ç•™æ¨ç† token ç©ºé—´
- **è‡ªåŠ¨è°ƒæ•´**ï¼šè¶…è¿‡æ¨¡å‹é™åˆ¶æ—¶è‡ªåŠ¨è°ƒæ•´æ•°æ®é‡

### 3. ä¼šè¯ç®¡ç†

- æ¯ä¸ªä»»åŠ¡å¼€å§‹æ—¶é‡ç½®ä¼šè¯ï¼ˆåªä¿ç•™ system promptï¼‰
- æ¥è¿‘é™åˆ¶æ—¶è‡ªåŠ¨å¼€å¯æ–°ä¼šè¯
- åˆ©ç”¨ Context Cachingï¼Œæ–°ä¼šè¯çš„ system prompt ä¼šè¢«ç¼“å­˜

### 4. é”™è¯¯å¤„ç†å’Œé‡è¯•

- è‡ªåŠ¨æ£€æµ‹è¾“å‡ºæˆªæ–­
- æ”¯æŒè‡ªåŠ¨é‡è¯•ï¼ˆæœ€å¤š 3 æ¬¡ï¼‰
- è¯¦ç»†çš„é”™è¯¯æ—¥å¿—å’Œè°ƒè¯•ä¿¡æ¯
- ä¿å­˜è°ƒè¯•æ–‡ä»¶ä¾¿äºé—®é¢˜æ’æŸ¥

## ä¸åŒè½®æ¬¡çš„æ•°æ®é‡è¯´æ˜

| è½®æ¬¡ | æ¯æ¡æ•°æ®tokenæ•° | 50æ¡æ€»tokenæ•° | 
|------|----------------|--------------|
| 1è½® | ~365 | ~18,250 | 
| 2è½® | ~344 | ~17,200 | 
| 3è½® | ~354 | ~17,700 | 
| 4è½® | ~481 | ~24,050 | 
| 5è½® | ~425 | ~21,250 | 

**æ³¨æ„**ï¼š
- å¦‚æœAPIæ— æ³•ä¸€æ¬¡ç”Ÿæˆ 50 æ¡æ•°æ®ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨åˆ†æ‰¹ç”Ÿæˆå¹¶è¡¥é½
- reasoner æ¨¡å‹æ”¯æŒæ›´å¤§çš„è¾“å‡ºï¼ˆæœ€å¤§ 64K tokensï¼‰

## è°ƒæ•´å»ºè®®

### å¦‚æœç”Ÿæˆè´¨é‡ä¸å¤Ÿ

- ä½¿ç”¨ `deepseek-reasoner` æ¨¡å‹ï¼ˆé»˜è®¤å·²å¯ç”¨ï¼‰
- æ£€æŸ¥ `initial_prompt.txt` æ˜¯å¦æ¸…æ™°æ˜ç¡®
- è°ƒæ•´ `TEMPERATURE` å‚æ•°ï¼ˆåœ¨ `client/deepseek_client.py` ä¸­ï¼‰

### å¦‚æœæ•°æ®ç»å¸¸è¢«æˆªæ–­

- **è¿™æ˜¯æ­£å¸¸ç°è±¡**ï¼è„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶åˆ†æ‰¹è¡¥é½
- å¯¹äº 5 è½®å¯¹è¯ï¼Œé€šå¸¸éœ€è¦ 2-3 æ¬¡è¯·æ±‚æ‰èƒ½å®Œæˆ 50 æ¡
- å¦‚æœé¢‘ç¹æˆªæ–­ï¼Œæ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº†æ­£ç¡®çš„æ¨¡å‹

### å¦‚æœ Token æ¶ˆè€—è¿‡å¤š

- æ£€æŸ¥ Context Cache å‘½ä¸­ç‡ï¼ˆè„šæœ¬ä¼šæ˜¾ç¤ºï¼‰
- ç¡®ä¿ system prompt å›ºå®šä¸å˜ï¼Œä»¥è§¦å‘ç¼“å­˜
- åˆ†æ‰¹ç”Ÿæˆæ˜¯æ­£å¸¸çš„ï¼Œä¸ä¼šæµªè´¹ token

### å¦‚æœç»å¸¸éœ€è¦å¼€å¯æ–°ä¼šè¯

- å¯ä»¥é€‚å½“æé«˜ `MAX_CONTEXT_LENGTH`ï¼ˆåœ¨ `client/deepseek_client.py` ä¸­ï¼‰
- ä½†è¦æ³¨æ„ç•™å‡ºè¶³å¤Ÿçš„ bufferï¼Œé¿å…è¶…é™
- å¯¹äºå¤§æ•°æ®é‡åœºæ™¯ï¼Œå¼€å¯æ–°ä¼šè¯æ˜¯æ­£å¸¸çš„

## æ•…éšœæ’æŸ¥

### API Key æœªè®¾ç½®

```
âŒ é”™è¯¯: æœªè®¾ç½®DEEPSEEK_API_KEYç¯å¢ƒå˜é‡
```

**è§£å†³**ï¼šæŒ‰ç…§ä¸Šè¿°æ­¥éª¤è®¾ç½®ç¯å¢ƒå˜é‡

### JSON è§£æå¤±è´¥

å¦‚æœé‡åˆ° JSON è§£æé”™è¯¯ï¼Œè„šæœ¬ä¼šï¼š
1. å°è¯•å¤šç§æ–¹å¼æå– JSONï¼ˆåŒ…æ‹¬å¤„ç†æˆªæ–­æƒ…å†µï¼‰
2. å¦‚æœå¤±è´¥ï¼Œä¼šå°†åŸå§‹å“åº”è¿½åŠ ä¿å­˜åˆ° `{è½®æ¬¡}_round_debug.txt` æ–‡ä»¶ï¼ˆæ¯æ¬¡è¿½åŠ æ—¶ä¼šåœ¨å†…å®¹å¼€å¤´æ·»åŠ æ—¶é—´æˆ³ï¼‰
3. ä¿æŒåŸæœ‰æ•°æ®é‡ï¼Œä¸ä¼šä¸¢å¤±å·²ç”Ÿæˆçš„æ•°æ®

### ç½‘ç»œé”™è¯¯

è„šæœ¬ä¼šè‡ªåŠ¨é‡è¯•ï¼Œå¦‚æœæŒç»­å¤±è´¥ï¼Œè¯·æ£€æŸ¥ï¼š
1. ç½‘ç»œè¿æ¥æ˜¯å¦ç¨³å®š
2. API Key æ˜¯å¦æœ‰æ•ˆ
3. API é…é¢æ˜¯å¦å……è¶³
4. æŸ¥çœ‹é”™è¯¯æ—¥å¿—ä¸­çš„è¯¦ç»†æç¤º

### å¯¼å…¥é”™è¯¯

å¦‚æœé‡åˆ°æ¨¡å—å¯¼å…¥é”™è¯¯ï¼š

```bash
# ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œ
python generate_corpus.py
```

æˆ–è€…ä½¿ç”¨ Python æ¨¡å—æ–¹å¼è¿è¡Œï¼š

```bash
python -m generate_corpus
```

## ç¤ºä¾‹è¾“å‡º

```
ğŸ“– è§£æç”Ÿæˆè®¡åˆ’...
âœ… è§£æå®Œæˆ:
   - é¢†åŸŸ: 20ä¸ª
   - æ¨¡ç³Šç±»å‹: 8ç§
   - å¯¹è¯è½®æ¬¡: 5ç§
   - æ€»ä»»åŠ¡æ•°: 800ä¸ª

ğŸ¤– ä½¿ç”¨æ¨¡å‹: deepseek-reasoner
ğŸ“Š é…ç½®ä¿¡æ¯:
   - æœ€å¤§è¾“å‡ºtokens: 64000 (reasoneræ¨¡å‹)
   - æœ€å¤§ä¸Šä¸‹æ–‡é•¿åº¦: 110000
   - Temperature: 0.7
   - max_tokenså°†æ ¹æ®é¢„ä¼°è¾“å‡ºé•¿åº¦åŠ¨æ€è®¾ç½®

ğŸ“ åˆ›å»ºæœªå®Œæˆä»»åŠ¡è®°å½•æ–‡ä»¶: data/cautious_secretary_raw/incomplete_tasks.txt

ğŸ“Š è¿›åº¦: 1/800
================================================================================
ğŸ“ å¼€å§‹ç”Ÿæˆ: ç¾å®¹ç¾å‘ (Beauty_Hairdressing) - constraint_missingï¼ˆçº¦æŸç¼ºå¤±ï¼‰ - 5è½®ï¼šç”¨æˆ·-åŠ©æ‰‹è¿½é—®-ç”¨æˆ·å›ç­”-åŠ©æ‰‹è¿½é—®-ç”¨æˆ·å›ç­”-åŠ©æ‰‹è¿½é—®-ç”¨æˆ·å›ç­”-åŠ©æ‰‹è¿½é—®-ç”¨æˆ·å›ç­”-åŠ©æ‰‹æ€»ç»“
================================================================================
âœ… æ–°ä¼šè¯å·²å¼€å¯ (system prompt: 6175 tokens)
ğŸ“Š å½“å‰å·²æœ‰ 0 æ¡æ•°æ®ï¼Œéœ€è¦ç”Ÿæˆ 50 æ¡
ğŸ“Š ä¼°ç®—è¾“å‡ºtokenæ•°: 30625 tokens
ğŸ“¤ å‘é€ç”ŸæˆæŒ‡ä»¤ï¼ˆè¦æ±‚ç”Ÿæˆ50æ¡æ•°æ®ï¼Œmax_tokens=30625ï¼‰...
ğŸ’¾ Context Cacheå‘½ä¸­: 6848/6868 tokens (99.7%)
ğŸ“Š Tokenä½¿ç”¨: è¾“å…¥=6868 (ç¼“å­˜å‘½ä¸­=6848, æœªå‘½ä¸­=20), è¾“å‡º=18432 (æ¨ç†=5234, å†…å®¹=13198), æ€»è®¡=25300, max_tokens=30625
ğŸ” æå–JSONæ•°æ®...
âœ… å·²ä¿å­˜ 48 æ¡æ–°æ•°æ®åˆ° data/cautious_secretary_raw/Beauty_Hairdressing/constraint_missing/5_round.json (æ€»è®¡: 48 æ¡)
âœ… é¦–æ¬¡ç”Ÿæˆ: 48 æ¡æ•°æ®
ğŸ“Š å½“å‰æ•°æ®é‡: 48/50ï¼Œéœ€è¦è¡¥é½ 2 æ¡
ğŸ“Š ä¼°ç®—è¡¥é½éœ€è¦çº¦4676 tokens
ğŸ“¤ å‘é€è¡¥é½è¯·æ±‚ï¼ˆéœ€è¦2æ¡ï¼Œmax_tokens=4676ï¼‰...
ğŸ“Š Tokenä½¿ç”¨: è¾“å…¥=8920, è¾“å‡º=4675 (æ¨ç†=4415, å†…å®¹=260), æ€»è®¡=13595, max_tokens=4676
ğŸ” æå–JSONæ•°æ®...
âœ… å·²ä¿å­˜ 2 æ¡æ–°æ•°æ®åˆ° data/cautious_secretary_raw/Beauty_Hairdressing/constraint_missing/5_round.json (æ€»è®¡: 50 æ¡)
âœ… ä»»åŠ¡å®Œæˆï¼æœ€ç»ˆæ•°æ®é‡: 50/50
â³ ç­‰å¾…3ç§’ï¼Œé¿å…APIé™æµ...
âœ… ä»»åŠ¡ 1/800 å®Œæˆ
```

## æ³¨æ„äº‹é¡¹

1. **API è´¹ç”¨**ï¼šç”Ÿæˆ 800 ä¸ªä»»åŠ¡ï¼ˆæ¯ä¸ª 50 æ¡æ•°æ®ï¼‰ä¼šäº§ç”Ÿå¤§é‡ API è°ƒç”¨ï¼Œè¯·æ³¨æ„è´¹ç”¨
   - å»ºè®®å…ˆæµ‹è¯•å°è§„æ¨¡ä»»åŠ¡
   - åˆ©ç”¨ Context Caching å¯ä»¥å¤§å¹…èŠ‚çœè´¹ç”¨

2. **ç½‘ç»œç¨³å®šæ€§**ï¼šç¡®ä¿ç½‘ç»œè¿æ¥ç¨³å®š
   - è„šæœ¬ä¼šè‡ªåŠ¨é‡è¯•ï¼Œä½†å»ºè®®åœ¨ç¨³å®šçš„ç½‘ç»œç¯å¢ƒä¸‹è¿è¡Œ
   - æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼Œå¯ä»¥éšæ—¶ä¸­æ–­å’Œæ¢å¤

3. **è¿è¡Œæ—¶é—´**ï¼šå®Œæ•´ç”Ÿæˆæ‰€æœ‰æ•°æ®å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´
   - å»ºè®®åœ¨åå°è¿è¡Œæˆ–ä½¿ç”¨ `nohup`/`screen`/`tmux` ç­‰å·¥å…·
   - å¯ä»¥ä½¿ç”¨ `nohup python generate_corpus.py > output.log 2>&1 &` åœ¨åå°è¿è¡Œ

4. **æ•°æ®éªŒè¯**ï¼šç”Ÿæˆå®Œæˆåï¼Œå»ºè®®æ£€æŸ¥æ•°æ®è´¨é‡
   - ä½¿ç”¨ `data_processing/check_conversations.py` è„šæœ¬è‡ªåŠ¨æ£€æŸ¥æ•°æ®è´¨é‡
   - ä½¿ç”¨ `data_processing/print_stats.py` æŸ¥çœ‹ç»Ÿè®¡æŠ¥å‘Š
   - ä½¿ç”¨ `data_processing/consolidate_data.py` æ•´ç†æ•°æ®
   - ç¡®ä¿ JSON æ ¼å¼æ­£ç¡®
   - æ£€æŸ¥æ•°æ®æ¡æ•°æ˜¯å¦ç¬¦åˆé¢„æœŸ
   - æŸ¥çœ‹ `incomplete_tasks.txt` äº†è§£æœªå®Œæˆçš„ä»»åŠ¡ï¼ˆè¿½åŠ æ¨¡å¼ï¼Œæ¯æ¬¡å¤±è´¥æ—¶æ·»åŠ å¸¦æ—¶é—´æˆ³çš„è®°å½•ï¼Œä¸ä¼šæ¸…ç©ºå†å²è®°å½•ï¼‰

## æ•°æ®å¤„ç†å·¥å…·

é¡¹ç›®æä¾›äº†å®Œæ•´çš„æ•°æ®å¤„ç†å·¥å…·é›†ï¼Œä½äº `data_processing/` ç›®å½•ä¸‹ã€‚

### 1. æ•°æ®è´¨é‡æ£€æµ‹ (`check_conversations.py`)

è‡ªåŠ¨æ£€æŸ¥å’Œæ¸…ç†å¯¹è¯æ•°æ®ï¼Œç¡®ä¿æ•°æ®è´¨é‡ã€‚

#### åŠŸèƒ½ç‰¹æ€§

- âœ… **è‡ªåŠ¨æ£€æŸ¥**ï¼šéå†æ‰€æœ‰æ•°æ®æ–‡ä»¶ï¼Œæ£€æŸ¥æ¯æ¡æ•°æ®çš„å®Œæ•´æ€§
- ğŸ§¹ **è‡ªåŠ¨æ¸…ç†**ï¼šè‡ªåŠ¨ç§»é™¤ä¸ç¬¦åˆè¦æ±‚çš„æ•°æ®
- ğŸ“Š **ç»Ÿè®¡æŠ¥å‘Š**ï¼šç”Ÿæˆè¯¦ç»†çš„ç»Ÿè®¡ä¿¡æ¯ï¼ŒåŒ…æ‹¬æŒ‰é¢†åŸŸã€è½®æ¬¡ã€æ¨¡ç³Šç±»å‹çš„åˆ†ç±»ç»Ÿè®¡
- ğŸ’¾ **ç»“æœä¿å­˜**ï¼šå°†ç»Ÿè®¡ä¿¡æ¯ä¿å­˜åˆ° `data_processing/conversation_check_stats.json`

#### æ£€æŸ¥é¡¹ç›®

è„šæœ¬ä¼šå¯¹æ¯æ¡æ•°æ®æ‰§è¡Œä»¥ä¸‹æ£€æŸ¥ï¼š

1. **`system` å­—æ®µæ£€æŸ¥**ï¼šç¡®ä¿æ•°æ®åŒ…å« `system` å­—æ®µ
2. **`conversations` å­—æ®µæ£€æŸ¥**ï¼šç¡®ä¿ `conversations` å­˜åœ¨ä¸”ä¸ºåˆ—è¡¨ç±»å‹
3. **å¯¹è¯ç»“æ„æ£€æŸ¥**ï¼šç¡®ä¿å¯¹è¯é¡¹ä¸ºå­—å…¸ç±»å‹ï¼ŒåŒ…å« `from` å­—æ®µ
4. **æ•°é‡åŒ¹é…æ£€æŸ¥**ï¼šç¡®ä¿ `human` å’Œ `gpt` çš„æ•°é‡ç›¸ç­‰
5. **è½®æ¬¡åŒ¹é…æ£€æŸ¥**ï¼šç¡®ä¿å¯¹è¯è½®æ¬¡ä¸æ–‡ä»¶åä¸­çš„è½®æ¬¡æ•°åŒ¹é…
6. **æ€»ç»“æ ¼å¼æ£€æŸ¥**ï¼šç¡®ä¿æœ€åä¸€ä¸ª `gpt` å¯¹è¯çš„ `value` ä»¥ `"ã€å®Œæ•´è¯·æ±‚æ€»ç»“ã€‘"` å¼€å¤´

#### ä½¿ç”¨æ–¹æ³•

```bash
python data_processing/check_conversations.py
```

#### è¾“å‡ºè¯´æ˜

è„šæœ¬ä¼šï¼š

1. **å®æ—¶è¾“å‡º**ï¼šæ˜¾ç¤ºå¤„ç†è¿›åº¦å’Œæ¯ä¸ªæ–‡ä»¶çš„æ£€æŸ¥ç»“æœ
   - å¦‚æœæ–‡ä»¶é€šè¿‡æ£€æŸ¥ï¼šæ˜¾ç¤º `é€šè¿‡ (X æ¡æ•°æ®)`
   - å¦‚æœæœ‰æ•°æ®è¢«ç§»é™¤ï¼šæ˜¾ç¤º `ç§»é™¤äº† X æ¡æ•°æ®`

2. **ç»Ÿè®¡æŠ¥å‘Š**ï¼šåœ¨æ§åˆ¶å°è¾“å‡ºè¯¦ç»†çš„ç»Ÿè®¡ä¿¡æ¯
   - æ€»ä½“ç»Ÿè®¡ï¼šå¤„ç†æ–‡ä»¶æ•°ã€æ•°æ®æ€»æ•°ã€åˆ é™¤æ•°ã€åˆ é™¤ç‡
   - æŒ‰é¢†åŸŸç»Ÿè®¡ï¼šæ¯ä¸ªé¢†åŸŸçš„æ•°æ®æƒ…å†µ
   - æŒ‰è½®æ¬¡ç»Ÿè®¡ï¼šæ¯ä¸ªè½®æ¬¡çš„æ•°æ®æƒ…å†µ
   - æŒ‰æ¨¡ç³Šç±»å‹ç»Ÿè®¡ï¼šæ¯ç§ç±»å‹çš„æ•°æ®æƒ…å†µ
   - é”™è¯¯è¯¦æƒ…ï¼šå‰10ä¸ªæœ‰é—®é¢˜çš„æ–‡ä»¶åŠå…¶é”™è¯¯ä¿¡æ¯

3. **JSON æŠ¥å‘Š**ï¼šå°†ç»Ÿè®¡ä¿¡æ¯ä¿å­˜åˆ° `data_processing/conversation_check_stats.json`
   - åŒ…å«æ‰€æœ‰ç»Ÿè®¡ä¿¡æ¯
   - åŒ…å«å‰20ä¸ªé”™è¯¯è¯¦æƒ…
   - ä¾¿äºåç»­åˆ†æå’Œè¿½è¸ª

### 2. æ•°æ®æ•´ç† (`consolidate_data.py`)

å°†åˆ†æ•£çš„æ•°æ®æ–‡ä»¶æ•´ç†æˆä¸€ä¸ªç»Ÿä¸€çš„ JSON æ–‡ä»¶ï¼Œä¾¿äºåç»­ä½¿ç”¨ã€‚

#### åŠŸèƒ½ç‰¹æ€§

- ğŸ“¦ **æ•°æ®æ•´åˆ**ï¼šå°†æ‰€æœ‰ `*_round.json` æ–‡ä»¶ä¸­çš„æ•°æ®æ•´åˆåˆ°ä¸€ä¸ªæ–‡ä»¶
- ğŸ¯ **çµæ´»è¿‡æ»¤**ï¼šæ”¯æŒæ’é™¤æ¨¡å¼æˆ–åŒ…å«æ¨¡å¼ï¼Œç²¾ç¡®æ§åˆ¶è¦æ•´ç†çš„æ•°æ®
- ğŸ“Š **æ•°é‡æ§åˆ¶**ï¼šå¯ä»¥é™åˆ¶ä»æ¯ä¸ªæ–‡ä»¶æå–çš„æ•°æ®æ¡æ•°
- ğŸ“ **æ™ºèƒ½è·¯å¾„**ï¼šæ”¯æŒç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„ï¼Œè‡ªåŠ¨è§„èŒƒåŒ–
- ğŸ”§ **é»˜è®¤è¾“å‡º**ï¼šä¸æŒ‡å®šè¾“å‡ºæ–‡ä»¶æ—¶ï¼Œè‡ªåŠ¨ä½¿ç”¨ `output_dataset/consolidated_data.json`

#### ä½¿ç”¨æ–¹æ³•

```bash
# ä½¿ç”¨é»˜è®¤è¾“å‡ºè·¯å¾„ï¼ˆoutput_dataset/consolidated_data.jsonï¼‰
python data_processing/consolidate_data.py

# æŒ‡å®šè¾“å‡ºæ–‡ä»¶
python data_processing/consolidate_data.py output.json

# æ’é™¤æŒ‡å®šè·¯å¾„
python data_processing/consolidate_data.py output.json --mode exclude --paths "Beauty_Hairdressing" "Education_Learning"

# åªåŒ…å«æŒ‡å®šè·¯å¾„
python data_processing/consolidate_data.py output.json --mode include --paths "Beauty_Hairdressing/condition_missing"

# é™åˆ¶æ¯ä¸ªæ–‡ä»¶æå–æ•°é‡
python data_processing/consolidate_data.py output.json --max-items 10

# ç»„åˆä½¿ç”¨
python data_processing/consolidate_data.py output.json --mode exclude --paths "Beauty_Hairdressing" --max-items 20
```

#### å‚æ•°è¯´æ˜

- `output_file` (å¯é€‰): è¾“å‡º JSON æ–‡ä»¶åã€‚å¦‚æœä¸æŒ‡å®šï¼Œå°†ä½¿ç”¨é»˜è®¤è·¯å¾„ `output_dataset/consolidated_data.json`
- `--max-items`: ä»æ¯ä¸ªè½®æ¬¡ JSON æ–‡ä»¶ä¸­æå–çš„æœ€å¤§æ•°æ®æ¡æ•°ï¼ˆé»˜è®¤ï¼šå…¨éƒ¨ï¼‰
- `--mode`: æ¨¡å¼é€‰æ‹©ï¼Œ`exclude`ï¼ˆæ’é™¤æ¨¡å¼ï¼Œé»˜è®¤ï¼‰æˆ– `include`ï¼ˆæ·»åŠ æ¨¡å¼ï¼‰
- `--paths`: è¦æ’é™¤æˆ–åŒ…å«çš„è·¯å¾„åˆ—è¡¨ï¼ˆæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼‰

#### è·¯å¾„æ ¼å¼

- å¯ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„: `"Beauty_Hairdressing/condition_missing/2_round.json"`
- å¯ä»¥ä½¿ç”¨ç»å¯¹è·¯å¾„: `"C:/path/to/data/cautious_secretary_raw/Beauty_Hairdressing/..."`
- è·¯å¾„ä¼šè‡ªåŠ¨è§„èŒƒåŒ–ï¼Œæ”¯æŒ Windows å’Œ Unix é£æ ¼è·¯å¾„
- è¾“å‡ºæ–‡ä»¶è·¯å¾„ï¼šç›¸å¯¹è·¯å¾„å°†ç›¸å¯¹äºè„šæœ¬æ‰€åœ¨ç›®å½•

### 3. ç»Ÿè®¡æŠ¥å‘Šæ‰“å° (`print_stats.py`)

æ‰“å°æ•°æ®è´¨é‡æ£€æµ‹çš„ç»Ÿè®¡æŠ¥å‘Šã€‚

#### ä½¿ç”¨æ–¹æ³•

```bash
python data_processing/print_stats.py
```

#### è¯´æ˜

- è¯»å– `data_processing/conversation_check_stats.json` æ–‡ä»¶
- åœ¨æ§åˆ¶å°è¾“å‡ºæ ¼å¼åŒ–çš„ç»Ÿè®¡æŠ¥å‘Š
- éœ€è¦å…ˆè¿è¡Œ `check_conversations.py` ç”Ÿæˆç»Ÿè®¡æ–‡ä»¶

### æ³¨æ„äº‹é¡¹

- **æ•°æ®å¤‡ä»½**ï¼š`check_conversations.py` ä¼šç›´æ¥ä¿®æ”¹åŸå§‹ JSON æ–‡ä»¶ï¼Œå»ºè®®åœ¨è¿è¡Œå‰å¤‡ä»½æ•°æ®
- **æ–‡ä»¶ä½ç½®**ï¼šæ‰€æœ‰æ•°æ®å¤„ç†è„šæœ¬çš„è¾“å‡ºæ–‡ä»¶éƒ½ä¿å­˜åœ¨ `data_processing/` ç›®å½•ä¸‹
- **é»˜è®¤è¾“å‡º**ï¼š`consolidate_data.py` çš„é»˜è®¤è¾“å‡ºè·¯å¾„ä¸º `output_dataset/consolidated_data.json`

## æ‰©å±•å¼€å‘

### æ·»åŠ æ–°çš„å®¢æˆ·ç«¯

1. åœ¨ `client/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„å®¢æˆ·ç«¯æ–‡ä»¶ï¼ˆå¦‚ `openai_client.py`ï¼‰
2. å®ç°ç›¸åŒçš„æ¥å£æ–¹æ³•
3. åœ¨ `client/__init__.py` ä¸­å¯¼å‡º
4. åœ¨æ–°å®¢æˆ·ç«¯æ–‡ä»¶ä¸­å®šä¹‰ç›¸å…³é…ç½®å¸¸é‡

### è‡ªå®šä¹‰ç”Ÿæˆè®¡åˆ’

1. ç¼–è¾‘ `command_generation/generation_plan.txt`
2. æŒ‰ç…§ç°æœ‰æ ¼å¼æ·»åŠ æ–°çš„é¢†åŸŸã€ç±»å‹æˆ–è½®æ¬¡
3. è„šæœ¬ä¼šè‡ªåŠ¨è§£æå¹¶ç”Ÿæˆæ‰€æœ‰ç»„åˆ

### ä¿®æ”¹é…ç½®

- **å®¢æˆ·ç«¯é…ç½®**ï¼šç¼–è¾‘ `client/deepseek_client.py` æ–‡ä»¶é¡¶éƒ¨çš„é…ç½®å¸¸é‡
- **ä¸»ç¨‹åºé…ç½®**ï¼šç¼–è¾‘ `config.py`
- **ç¯å¢ƒå˜é‡**ï¼šé€šè¿‡ç¯å¢ƒå˜é‡è¦†ç›–é»˜è®¤é…ç½®ï¼ˆå¦‚ `DEEPSEEK_API_KEY`ã€`DEEPSEEK_MODEL`ï¼‰

### æ•°æ®å¤„ç†å·¥ä½œæµ

æ¨èçš„æ•°æ®å¤„ç†å·¥ä½œæµï¼š

1. **ç”Ÿæˆæ•°æ®**ï¼šè¿è¡Œ `python generate_corpus.py` ç”ŸæˆåŸå§‹æ•°æ®
2. **è´¨é‡æ£€æµ‹**ï¼šè¿è¡Œ `python data_processing/check_conversations.py` æ£€æŸ¥å¹¶æ¸…ç†æ•°æ®
3. **æŸ¥çœ‹ç»Ÿè®¡**ï¼šè¿è¡Œ `python data_processing/print_stats.py` æŸ¥çœ‹ç»Ÿè®¡æŠ¥å‘Š
4. **æ•´ç†æ•°æ®**ï¼šè¿è¡Œ `python data_processing/consolidate_data.py` æ•´ç†æˆç»Ÿä¸€çš„æ•°æ®é›†
5. **ä½¿ç”¨æ•°æ®**ï¼šæ•´ç†åçš„æ•°æ®ä¿å­˜åœ¨ `output_dataset/consolidated_data.json`

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [Apache-2.0](LICENSE) è®¸å¯è¯ã€‚

## æ‰“èµ

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæ¬¢è¿æ‰“èµæ”¯æŒï¼æ‚¨çš„æ”¯æŒæ˜¯æˆ‘æŒç»­æ”¹è¿›çš„åŠ¨åŠ›ã€‚

- **æ”¯ä»˜å®**: 

![æ”¯ä»˜å®äºŒç»´ç ](utils/QRcode.jpg)

**ä»“åº“åœ°å€**: [https://github.com/Tang-Moyan/cautious_secretary_dataset](https://github.com/Tang-Moyan/cautious_secretary_dataset)

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

